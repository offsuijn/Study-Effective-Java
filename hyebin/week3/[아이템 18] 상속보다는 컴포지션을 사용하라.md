# [ì•„ì´í…œ 18] ìƒì†ë³´ë‹¤ëŠ” ì»´í¬ì§€ì…˜ì„ ì‚¬ìš©í•˜ë¼

ì—¬ê¸°ì„œ ë§í•˜ëŠ” ìƒì†****(extends)****ì€ **í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” êµ¬í˜„**ì´ë‹¤.

í´ë˜ìŠ¤ê°€ ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•˜ê±°ë‚˜ ì¸í„°í˜ì´ìŠ¤ê°€ ë‹¤ë¥¸ ì¸í„°í˜ì´ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ìƒì†ì´ ì•„ë‹ˆë‹¤.

## ìº¡ìŠí™” breaking

ë©”ì„œë“œ í˜¸ì¶œê³¼ ë‹¬ë¦¬ **ìƒì†ì€ ìº¡ìŠí™”ë¥¼ ê¹¨ëœ¨ë¦°ë‹¤**

ìƒìœ„ í´ë˜ìŠ¤ê°€ ì–´ë–»ê²Œ êµ¬í˜„ë˜ëŠëƒì— ë”°ë¼ í•˜ìœ„ í´ë˜ìŠ¤ì˜ ë™ì‘ì— ì´ìƒì´ ìƒê¸¸ ìˆ˜ ìˆë‹¤.
íŠ¹íˆ ìƒìœ„ í´ë˜ìŠ¤ê°€ ë¦´ë¦¬ì¦ˆë§ˆë‹¤ êµ¬í˜„ì´ ë°”ë€ë‹¤ë©´ í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œë„ ë©ë‹¬ì•„ ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ ìˆë‹¤.

**í•˜ìœ„í´ë˜ìŠ¤ì—ì„œ ìƒìœ„í´ë˜ìŠ¤ ë©”ì„œë“œ ì¬ì •ì˜ëŠ” í•˜ë©´ ì•ˆëœë‹¤**

í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ ë©”ì„œë“œ ì¶”ê°€ëŠ” í›¨ì”¬ ì•ˆì •ì ì´ê¸´ í•˜ì§€ë§Œ ìš´ì´ ì—†ìœ¼ë©´ ì´ë„ ìœ ì‚¬í•œ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œì™€ ì¶©ëŒì´ ì¼ì–´ë‚˜ì„œ ì˜¤ë¥˜ê°€ ë‚  ìˆ˜ ìˆë‹¤.

## ì»´í¬ì§€ì…˜

ê¸°ì¡´ì˜ í´ë˜ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ëŒ€ì‹ , 

ìƒˆë¡œìš´ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  `private` í•„ë“œë¡œ ê¸°ì¡´ í´ë˜ìŠ¤(ìƒìœ„ í´ë˜ìŠ¤)ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì°¸ì¡°í•˜ê²Œ í•˜ëŠ” ë°©ë²•

ìƒˆ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œë“¤ì€ **ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ëŒ€ì‘í•˜ëŠ” ë©”ì„œë“œë¥¼ í˜¸ì¶œ**í•œë‹¤.

ì´ëŸ° ë°©ì‹ì€ ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ë‚´ë¶€ êµ¬í˜„ ë°©ì‹ì˜ ì˜í–¥ì—ì„œ ë²—ì–´ë‚˜ê³  ê¸°ì¡´ í´ë˜ìŠ¤ê°€ ë³€ê²½ë¼ë„ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤.

## ì»´í¬ì§€ì…˜ í™œìš©í•˜ê¸°

ğŸ˜¥**ë¬¸ì œìƒí™©**

```java
public class MyHashSet<E> extends HashSet<E> {
    private int addCount = 0; // ì¶”ê°€ëœ ì›ì†Œì˜ ê°œìˆ˜

    @Override
    public boolean add(E e) {
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> c) {
        addCount = addCount + c.size();
        return super.addAll(c);
    }

    public int getAddCount() {
        return addCount;
    }
}

// ê°ì²´ ìƒì„± í›„ 3ê°œì˜ ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ addAll ë©”ì„œë“œë¡œ ì¶”ê°€
MyHashSet<String> mySet = new MyHashSet<>();
mySet.addAll(List.of("íƒ±1","íƒ±2","íƒ±3"));

// ì¶œë ¥ë˜ëŠ” ê°’ì€?
System.out.println(mySet.getAddCount());
```

ì´ ì¶”ê°€ë˜ì—ˆë˜ ì›ì†Œì˜ ê°¯ìˆ˜ê°€ ì–¼ë§ˆì¸ì§€ êµ¬í•˜ê³  ì‹¶ì–´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ìƒìœ„ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ ìƒˆë¡œ ì •ì˜í–ˆëŠ”ë° ë¬¸ì œê°€ ìƒê¸´ë‹¤.

addCount ì˜ ê°’ì´ 3ì´ ë‚˜ì™€ì•¼ í•˜ëŠ”ë° 6ì´ ë‚˜ì™€ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤.

```java
// HashSet(AbstractSet)ì˜ addAll ë©”ì„œë“œ
public boolean addAll(Collection<? extends E> c) {
    boolean modified = false;
    for (E e : c)
        if (add(e))
            modified = true;
    return modified;
}
```

ì›ì¸ì€ ìƒìœ„ í´ë˜ìŠ¤ì¸ HashSetì˜ addAll ë©”ì„œë“œì— ìˆë‹¤.

addAll ë©”ì„œë“œ ìì²´ê°€ addë¥¼ í˜¸ì¶œí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ addCountê°€ addì—ì„œ í•œ ë²ˆì”© ì´ë¯¸ ì¦ê°€í•˜ê²Œ ëœ ê²ƒì´ë‹¤.

ğŸ‘ **ì»´í¬ì§€ì…˜ìœ¼ë¡œ í•´ê²°í•˜ê¸°**

```java
public class MySet<E> extends ForwardingSet<E>  {
    private int addCount = 0;

    public MySet(Set<E> set) {
        super(set);
    }

    @Override
    public boolean add(E e) {
        addCount++;
        return super.add(e);
    }

    @Override
    public boolean addAll(Collection<? extends E> collection) {
        addCount = addCount + collection.size();
        return super.addAll(collection);
    }

    public int getAddCount() {
        return addCount;
    }
}

public class ForwardingSet<E> implements Set<E> {
    private final Set<E> set;
    public ForwardingSet(Set<E> set) { this.set = set; }
    public void clear() { set.clear(); }
    public boolean isEmpty() { return set.isEmpbty(); }
    public boolean add(E e) { return set.add(e); }
    public boolean addAll(Collection<? extends E> c) { return set.addAll(c); }
    // ... ìƒëµ
}
```

ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ **ê¸°ì¡´ì— ìƒì†ë°›ê³ ì í–ˆë˜ ìƒìœ„ í´ë˜ìŠ¤ë¥¼ `private fianl` í•„ë“œë¡œ ê°–ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œ êµ¬í˜„í•œë‹¤** 

ê·¸ë¦¬ê³  ìƒì†ë°›ì„ í•˜ìœ„í´ë˜ìŠ¤ì— ìƒˆë¡œ êµ¬í˜„í•œ í´ë˜ìŠ¤ë¥¼ ìƒì†ë°›ëŠ”ë‹¤. 

ë‹¤ë¥¸ Set ì¸ìŠ¤í„´ìŠ¤ë¥¼ ê°ì‹¸ê³  ìˆë‹¤ëŠ” ëœ»ì—ì„œ MySetê³¼ ê°™ì€ í´ë˜ìŠ¤ë¥¼Â **ë˜í¼ í´ë˜ìŠ¤**
ë¼ê³  í•˜ë©° ë‹¤ë¥¸ Setì— ê³„ì¸¡ ê¸°ëŠ¥ì„ ë§ì”Œìš´ë‹¤ëŠ” ëœ»ì—ì„œÂ **ë°ì½”ë ˆì´í„° íŒ¨í„´(Decorator Pattern)**
ì´ë¼ê³  í•©ë‹ˆë‹¤. ì»´í¬ì§€ì…˜ê³¼ ì „ë‹¬ì˜ ì¡°í•©ì€ ë„“ì€ ì˜ë¯¸ë¡œ ìœ„ì„(delegation)ì´ë¼ê³  í•˜ì§€ë§Œ ì—„ë°€íˆ ë”°ì§€ë©´ ë˜í¼ ê°ì²´ê°€ ë‚´ë¶€ ê°ì²´ì— ìê¸° ìì‹ ì˜ ì°¸ì¡°ë¥¼ ë„˜ê¸°ëŠ” ê²½ìš°ì—ë§Œ í•´ë‹¹ëœë‹¤.
